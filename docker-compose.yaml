services:
  # Define the PlatformIO development container
  platformio-dev:
    build: .  # Build the image using the Dockerfile in the current directory
    container_name: platformio-dev  # Set a fixed container name for easier reference
    privileged: true  # Allow access to hardware devices such as serial ports
    devices:
      - "/dev/ttyACM0:/dev/ttyACM0" # Common device path for Arduino, RP2040, etc.
      - "/dev/ttyUSB0:/dev/ttyUSB0" # Common device path for ESP32, STM32, etc.
    volumes:
      - ./workspace:/workspace  # Mount local workspace directory into the container
    working_dir: /workspace  # Set the default working directory inside the container
    environment:
      - PLATFORMIO_CORE_DIR=/root/.platformio  # Define PlatformIO core directory location
    stdin_open: true  # Keep STDIN open for interactive sessions
    tty: true  # Allocate a pseudo-TTY for interactive command-line use



